Это фреймворк для выполнения клинических исследований.
Результаты кажого этапа записываются в  Record.

Мне нужно реализовать такой дизайн.

CT screen Scan Analysis
Это этап при котором врач с помощью slicer 3d отмечает очаги в печени. В результате мы получаем nifty файл с зонами интереса.

CT preop Scan Analysis
Это этап при котором врач с помощью slicer 3d отмечает очаги в печени. В результате мы получаем nifty файл с зонами интереса

Master model
В слайсере делается модель по данным всех методов лучевой диагностики. Т.е. все зоны интереса со всех моделей всех модальностей объединяются в одну модель.

MRI preop Scan Analysis
Это этап при котором врач с помощью slicer 3d отмечает очаги в печени. В результате мы получаем nifty файл с зонами интереса

Если в мастер модели появляется новый очаг то должны быть заново пересмотрены исследования и обновлены модели по каждой модальности с указанием места этого очага.

Таким образов все модели должны быть синхронизированы и содержать одинаковое число очагов. Более того очаги в моделях должны иметь одинаковые id.

К каждой модели должна прилагаться запись которая содержит какую-то характеристику всех отмеченных на ней очагов.

Таким образом мне нужно придумать какой-то механизм версионирования этих записей и моделей, а также обеспечения целостности данных. И обновления их статуса (на базе @klara/services/taskflow). Возможно надо как-то изменить базовую схему Record и RecordType чтобы поддерживать эту логику на базе фреймворка. Например, добавить возможность указания prefill скрипта для создания записи.

Предложи мне какие подходы есть для решения этой проблемы?